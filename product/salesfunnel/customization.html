<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Setup - INEXASLI</title>
    <link rel="stylesheet" href="salesflow.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="../../images/favicon.ico" type="image/x-icon">
    <style>
        .device-container {
            max-width: 480px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            width: 60%;
            height: 100%;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 4px;
            animation: progressLoad 1s ease-out;
        }
        
        @keyframes progressLoad {
            from { width: 40%; }
            to { width: 60%; }
        }
        
        .form-section {
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.05);
            margin-bottom: 15px;
            text-align: left;
            overflow: hidden;
        }
        
        .form-section:hover {
            border-color: rgba(16, 185, 129, 0.5);
            transform: translateY(-2px);
        }
        
        .form-section.collapsed {
            max-height: 60px;
            padding-bottom: 0;
        }
        
        .form-section.collapsed .form-group {
            display: none;
        }
        
        .form-section.collapsed .section-title {
            margin-bottom: 0;
            padding-bottom: 15px;
        }
        
        .form-group {
            margin-top: 20px;
        }
        
        .form-group:first-child {
            margin-top: 0;
        }
        
        .section-title {
            color: #fff;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }
        
        .section-title::after {
            content: '‚ñº';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.6);
            font-size: 14px;
            transition: transform 0.3s ease;
        }
        
        .form-section.collapsed .section-title::after {
            transform: translateY(-50%) rotate(180deg);
        }
        
        .form-label {
            display: block;
            color: #fff;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:hover, .form-select:hover, .form-textarea:hover {
            border-color: rgba(255,255,255,0.4);
            background: rgba(0,0,0,0.4);
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
            transform: translateY(-1px);
        }
        
        .form-input:invalid, .form-select:invalid, .form-textarea:invalid {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
        }
        
        .form-input::placeholder, .form-select::placeholder, .form-textarea::placeholder {
            color: rgba(255,255,255,0.6);
            opacity: 1;
        }
        
        .form-input:focus::placeholder, .form-select:focus::placeholder, .form-textarea:focus::placeholder {
            color: rgba(255,255,255,0.4);
        }
        
        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .grid-selection {
            display: grid;
            grid-template-columns: 1fr; /* One per row */
            gap: 8px; /* Reduced gap */
            margin-top: 15px;
        }
        
        .grid-item {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 10px 12px; /* Reduced vertical padding */
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .grid-item:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(16, 185, 129, 0.5);
        }
        
        .grid-item.selected {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
            color: #fff;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .grid-item-text {
            color: #ccc;
            font-size: 14px;
            font-weight: 500;
        }
        
        .grid-item.selected .grid-item-text {
            color: #fff !important;
            font-weight: 600;
        }
        
        .consultation-box {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }
        
        .consultation-text {
            color: #fff;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .btn-consultation {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-consultation:hover {
            transform: translateY(-2px);
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn-primary {
            flex: 1;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            flex: 1;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .setup-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .setup-title {
            color: #fff;
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .setup-subtitle {
            color: #ccc;
            font-size: 16px;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 10px 0 20px 0;
            gap: 8px;
            flex-wrap: nowrap;
            overflow-x: auto;
            padding: 0 5px;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 1.5px 3px;
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            font-size: 13px;
            color: #ccc;
            border: 1px solid rgba(255,255,255,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            white-space: nowrap;
            min-width: 0;
            flex-shrink: 0;
        }
        
        .step:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.4);
            transform: translateY(-2px);
        }
        
        .step.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }
        
        .step.active:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
            transform: translateY(-2px);
        }
        
        .step.completed {
            background: rgba(40, 167, 69, 0.3);
            color: #90ee90;
            border-color: #28a745;
        }
        
        .step.completed:hover {
            background: rgba(40, 167, 69, 0.5);
            transform: translateY(-2px);
        }
        
        .step-number {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
            flex-shrink: 0;
        }
        
        .step.completed .step-number {
            background: #28a745;
            color: white;
        }
        
        .step.active .step-number {
            background: rgba(255,255,255,0.3);
            color: white;
        }
        
        .posting-schedule-builder {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }
        
        .schedule-header {
            margin-bottom: 20px;
        }
        
        .schedule-label {
            color: #fff;
            font-size: 14px;
            font-weight: 600;
        }
        
        .days-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .day-toggle {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .day-toggle:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(16, 185, 129, 0.5);
            transform: translateY(-2px);
        }
        
        .day-toggle.active {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .day-label {
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .day-full {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            white-space: nowrap;
        }
        
        .day-toggle:hover .day-full {
            opacity: 1;
        }
        
        .time-slots {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 20px;
        }
        
        .time-slot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .time-slot-header span {
            color: #fff;
            font-size: 14px;
            font-weight: 600;
        }
        
        .add-time-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .add-time-btn:hover {
            transform: translateY(-1px);
        }
        
        .posting-time-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
        }
        
        .posting-time-item input[type="time"] {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            color: #fff;
            padding: 6px 8px;
            font-size: 14px;
        }
        
        .posting-time-item input[type="time"]:focus {
            outline: none;
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }
        
        .remove-time-btn {
            background: rgba(239, 68, 68, 0.8);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .remove-time-btn:hover {
            background: rgba(239, 68, 68, 1);
        }
    </style>
</head>
<body>
    <div class="splash-container" id="splashContainer" style="padding-top: 40px; position: absolute; top: 0; left: 0; width: 100%; z-index: 2;">
        <img src="../../images/favicon.svg" alt="INEXASLI Logo" class="splash-logo" style="margin-top: 20px;">
    </div>

    <div class="device-container" id="mainContent" style="opacity: 0; display: block; z-index: 1;">
        <div class="setup-header">
            <!-- Step Indicator -->
            <div class="step-indicator-placeholder"></div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <h1 class="setup-title">Customize Your Automation</h1>
            <p class="setup-subtitle">Tell us about your brand so we can create perfect content for your business</p>
        </div>

        <!-- Main Configuration Section -->
        <div class="card-style collapsed">
            <h3 class="card-title">Main Configuration</h3>
            <div class="card-content">
            
            <!-- Business Category Selection (shown for chat products) -->
            <div class="form-group" id="businessCategoryGroup" style="display: none;">
                <label class="form-label">Business Category *</label>
                <div class="grid-selection" id="categoryGrid" data-type="single" data-name="businessCategory">
                    <div class="grid-item" data-value="customer-facing">
                        <div class="grid-item-text">Customer-Facing Operations</div>
                    </div>
                    <div class="grid-item" data-value="internal-productivity">
                        <div class="grid-item-text">Internal Productivity and Operations</div>
                    </div>
                    <div class="grid-item" data-value="specialized-services">
                        <div class="grid-item-text">Specialized Services</div>
                    </div>
                    <div class="grid-item" data-value="creative-entertainment">
                        <div class="grid-item-text">Creative and Entertainment</div>
                    </div>
                    <div class="grid-item" data-value="industry-specific">
                        <div class="grid-item-text">Industry-Specific</div>
                    </div>
                </div>
                <input type="hidden" name="businessCategory" id="businessCategory" required>
            </div>

            <div class="form-group">
                <label class="form-label" for="timezone">Timezone for Business Purposes *</label>
                <select class="form-select" id="timezone" name="timezone" required>
                    <option value="">Select your timezone</option>
                    <option value="America/New_York">Eastern Time (ET)</option>
                    <option value="America/Chicago">Central Time (CT)</option>
                    <option value="America/Denver">Mountain Time (MT)</option>
                    <option value="America/Los_Angeles">Pacific Time (PT)</option>
                    <option value="America/Anchorage">Alaska Time (AKT)</option>
                    <option value="Pacific/Honolulu">Hawaii Time (HT)</option>
                    <option value="Europe/London">London (GMT)</option>
                    <option value="Europe/Paris">Paris (CET)</option>
                    <option value="Europe/Berlin">Berlin (CET)</option>
                    <option value="Asia/Tokyo">Tokyo (JST)</option>
                    <option value="Asia/Shanghai">Shanghai (CST)</option>
                    <option value="Asia/Kolkata">India (IST)</option>
                    <option value="Australia/Sydney">Sydney (AEST)</option>
                    <option value="Pacific/Auckland">Auckland (NZST)</option>
                </select>
            </div>
        </div>
        </div>

        <!-- Social Media Configuration Section -->
        <div class="card-style collapsed" id="socialSection">
            <h3 class="card-title">Social Media Configuration</h3>
            <div class="card-content">

            <div class="form-group">
                <label class="form-label">Posting Schedule *</label>
                <div class="posting-schedule-builder">
                    <div class="schedule-header">
                        <span class="schedule-label">Select days and times for automated posting:</span>
                    </div>
                    <div class="days-selector">
                        <div class="day-toggle" data-day="monday">
                            <div class="day-label">M</div>
                            <div class="day-full">Monday</div>
                        </div>
                        <div class="day-toggle" data-day="tuesday">
                            <div class="day-label">T</div>
                            <div class="day-full">Tuesday</div>
                        </div>
                        <div class="day-toggle" data-day="wednesday">
                            <div class="day-label">W</div>
                            <div class="day-full">Wednesday</div>
                        </div>
                        <div class="day-toggle" data-day="thursday">
                            <div class="day-label">T</div>
                            <div class="day-full">Thursday</div>
                        </div>
                        <div class="day-toggle" data-day="friday">
                            <div class="day-label">F</div>
                            <div class="day-full">Friday</div>
                        </div>
                        <div class="day-toggle" data-day="saturday">
                            <div class="day-label">S</div>
                            <div class="day-full">Saturday</div>
                        </div>
                        <div class="day-toggle" data-day="sunday">
                            <div class="day-label">S</div>
                            <div class="day-full">Sunday</div>
                        </div>
                    </div>
                    <div class="time-slots" id="timeSlots" style="display: none;">
                        <div class="time-slot-header">
                            <span>Posting Times (in your selected timezone)</span>
                            <button type="button" class="add-time-btn" onclick="addPostingTime()">+ Add Time</button>
                        </div>
                        <div id="postingTimesContainer">
                            <!-- Time inputs will be added here dynamically -->
                        </div>
                    </div>
                </div>
                <input type="hidden" name="postingSchedule" id="postingSchedule" required>
            </div>

            <div class="form-group">
                <label class="form-label" for="contentFocus">Content Focus *</label>
                <textarea class="form-textarea" id="contentFocus" name="contentFocus"
                    placeholder="What topics or themes should the posts focus on? (e.g., industry insights, customer success stories, educational content)" required></textarea>
            </div>

            <div class="form-group">
                <label class="form-label" for="targetAudience">Target Audience *</label>
                <textarea class="form-textarea" id="targetAudience" name="targetAudience"
                    placeholder="Describe your target audience (e.g., age range, interests, pain points, what they care about)" required></textarea>
            </div>
        </div>
        </div>

        <!-- Conversational AI Configuration Section (Chat & Reply) -->
            <div class="card-style collapsed" id="conversationalSection" style="display: none;">
                <h3 class="card-title">Conversational AI Configuration</h3>
                <div class="card-content">

                <div class="form-group">
                    <label class="form-label" for="industry">Business Industry *</label>
                    <select class="form-select" id="industry" name="industry" required>
                        <option value="">Select your industry</option>
                        <option value="restaurant">Restaurant/Food Service</option>
                        <option value="fitness">Fitness/Health</option>
                        <option value="retail">Retail/E-commerce</option>
                        <option value="beauty">Beauty/Wellness</option>
                        <option value="tech">Technology/Software</option>
                        <option value="consulting">Consulting/Professional Services</option>
                        <option value="real-estate">Real Estate</option>
                        <option value="automotive">Automotive</option>
                        <option value="education">Education/Training</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">AI Communication Tone *</label>
                    <div class="grid-selection" id="toneGrid" data-type="single" data-name="tone">
                        <div class="grid-item" data-value="professional">
                            <div class="grid-item-text">Professional</div>
                        </div>
                        <div class="grid-item" data-value="approachable">
                            <div class="grid-item-text">Approachable</div>
                        </div>
                        <div class="grid-item" data-value="engaging">
                            <div class="grid-item-text">Engaging</div>
                        </div>
                        <div class="grid-item" data-value="helpful">
                            <div class="grid-item-text">Helpful</div>
                        </div>
                    </div>
                    <input type="hidden" name="tone" id="tone" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="chatPurpose">Chat Purpose *</label>
                    <textarea class="form-textarea" id="chatPurpose" name="chatPurpose"
                        placeholder="Describe how you'll use the chat (e.g., customer support, role-playing, task management)" required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="chatAudience">Target Users *</label>
                    <textarea class="form-textarea" id="chatAudience" name="chatAudience"
                        placeholder="Describe who will interact with the chat (e.g., customers, employees, general public)" required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="contentRestrictions">Content Restrictions</label>
                    <textarea class="form-textarea" id="contentRestrictions" name="contentRestrictions"
                        placeholder="Any topics or responses the AI should avoid? (Applies to both chat and social replies)"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="chatWidgetName">Chat Widget Name</label>
                    <input type="text" class="form-input" id="chatWidgetName" name="chatWidgetName"
                        placeholder="e.g., INEXASLI Assistant, Support Bot">
                </div>

                <div class="form-group">
                    <label class="form-label">Chat Widget Colors</label>
                    <div class="grid-selection" id="colorGrid" data-type="single" data-name="chatColors">
                        <div class="grid-item" data-value="professional-dark">
                            <div class="grid-item-text">Professional Dark</div>
                        </div>
                        <div class="grid-item" data-value="modern-blue">
                            <div class="grid-item-text">Modern Blue</div>
                        </div>
                        <div class="grid-item" data-value="warm-green">
                            <div class="grid-item-text">Warm Green</div>
                        </div>
                        <div class="grid-item" data-value="vibrant-purple">
                            <div class="grid-item-text">Vibrant Purple</div>
                        </div>
                        <div class="grid-item" data-value="custom">
                            <div class="grid-item-text">Custom Colors</div>
                        </div>
                    </div>
                    <input type="hidden" name="chatColors" id="chatColors">
                </div>

                <div class="form-group">
                    <label class="form-label" for="knowledgeBase">Knowledge Base Documents</label>
                    <input type="file" class="form-input" id="knowledgeBase" name="knowledgeBase" multiple
                        accept=".pdf,.doc,.docx,.txt,.md">
                    <small style="color: rgba(255,255,255,0.7); font-size: 12px;">Upload documents for AI training (PDF, DOC, TXT, MD)</small>
                </div>
            </div>
            </div>

            <!-- Reply Logic Configuration Section -->
            <div class="card-style collapsed" id="replySection" style="display: none;">
                <h3 class="card-title">Social Media Reply Configuration</h3>
                <div class="card-content">

                <div class="form-group">
                    <label class="form-label" for="replyGuidelines">Comment Reply Guidelines *</label>
                    <textarea class="form-textarea" id="replyGuidelines" name="replyGuidelines"
                        placeholder="Specific guidelines for how the AI should respond to comments on social media posts (e.g., always be positive, focus on engagement, maintain brand voice)" required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="platformConsiderations">Platform Considerations *</label>
                    <textarea class="form-textarea" id="platformConsiderations" name="platformConsiderations"
                        placeholder="Platform-specific considerations for comment replies (e.g., Instagram comments should be under 900 characters, Twitter replies should be concise)" required></textarea>
                </div>
            </div>
            </div>
            </div>            <div class="consultation-box">
                <div class="consultation-text">
                    <strong>Want personalized consultation?</strong><br>
                    Schedule a 15-minute brand strategy call for enhanced customization
                </div>
                <a href="#" class="btn-consultation" onclick="scheduleConsultation()">
                    üìû Schedule Call (Optional)
                </a>
            </div>
        
        <!-- Continue Button -->
        <button class="btn-continue-to-quote" onclick="submitCustomizationForm()" style="margin-top: 20px;">Continue to Quote</button>
        
        <!-- Back Button -->
        <a href="packages.html" class="btn-back">‚Üê Back to Packages</a>
    </div>
    
    <!-- Legal Footer -->
    <div style="text-align: center; margin: 10px 0 20px 0; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
        <p style="color: #ccc; font-size: 12px; margin: 0;">
            <a href="#" onclick="showSocialTerms(); return false;" style="color: #4CAF50; text-decoration: none;">Terms of Service</a>
            ‚Ä¢ 
            <a href="#" onclick="showSocialPrivacy(); return false;" style="color: #4CAF50; text-decoration: none;">Privacy Policy</a>
            ‚Ä¢ Contact: support@inexasli.com
        </p>
    </div>
    
    <script>
        // Splash screen transition
        document.addEventListener('DOMContentLoaded', function() {
            const splash = document.getElementById('splashContainer');
            const main = document.getElementById('mainContent');
            
            if (!splash || !main) {
                console.error('Splash or main content elements not found');
                return;
            }
            
            // Start main content fade-in immediately
            main.style.transition = 'opacity 1.2s ease-in';
            
            setTimeout(() => {
                // Start crossfade
                main.style.opacity = '1';
                splash.style.opacity = '0';
                splash.style.transition = 'opacity 1.2s ease-out';
                
                setTimeout(() => {
                    splash.style.display = 'none';
                    main.style.position = 'static';
                    main.style.left = 'auto';
                    main.style.transform = 'none';
                    main.style.top = 'auto';
                }, 1200);
            }, 1500); // Show splash for 1.5 seconds
        });
    </script>
    
    <script>
        // Grid selection functionality
        document.addEventListener('DOMContentLoaded', function() {
            const gridSelections = document.querySelectorAll('.grid-selection');
            
            gridSelections.forEach(grid => {
                const type = grid.dataset.type; // 'single' or 'multiple'
                const name = grid.dataset.name;
                const items = grid.querySelectorAll('.grid-item');
                
                items.forEach(item => {
                    item.addEventListener('click', function() {
                        const value = this.dataset.value;
                        
                        if (type === 'single') {
                            // Single selection - clear others and select this one
                            items.forEach(i => i.classList.remove('selected'));
                            this.classList.add('selected');
                            
                            // Update hidden input
                            const hiddenInput = document.getElementById(name);
                            if (hiddenInput) {
                                hiddenInput.value = value;
                            }
                        } else {
                            // Multiple selection - toggle this item
                            this.classList.toggle('selected');
                            
                            // Update form data (will be handled in form submission)
                        }
                    });
                });
            });
            
            // Load selected package and adapt form
            const packageData = localStorage.getItem('quoteData');
            if (packageData) {
                const quoteData = JSON.parse(packageData);
                const selectedPackage = quoteData.package;
                
                // Optional: Add package info to page
                const subtitle = document.querySelector('.setup-subtitle');
                if (subtitle) {
                    subtitle.textContent = `Configure your AI chat and reply assistants for your business needs (Customizing ${selectedPackage.name})`;
                }
                
                // Show/hide sections based on selected package
                const packageType = selectedPackage.type; // 'basic', 'social', 'pro', 'enterprise'
                
                // Business category selection (shown for all packages since they all include chat)
                const businessCategoryGroup = document.getElementById('businessCategoryGroup');
                if (businessCategoryGroup) businessCategoryGroup.style.display = 'block';
                
                // Hide all config sections by default
                const conversationalSection = document.getElementById('conversationalSection');
                const replySection = document.getElementById('replySection');
                const socialSection = document.getElementById('socialSection');
                
                if (conversationalSection) conversationalSection.style.display = 'none';
                if (replySection) replySection.style.display = 'none';
                if (socialSection) socialSection.style.display = 'none';
                
                // Show sections based on package type
                if (packageType === 'basic') {
                    // Basic Chat: Show conversational AI config
                    if (conversationalSection) conversationalSection.style.display = 'block';
                } else if (packageType === 'social') {
                    // Social Starter: Show social media + conversational AI config
                    if (socialSection) socialSection.style.display = 'block';
                    if (conversationalSection) conversationalSection.style.display = 'block';
                } else if (packageType === 'pro') {
                    // Pro Bundle: Show all configs
                    if (socialSection) socialSection.style.display = 'block';
                    if (conversationalSection) conversationalSection.style.display = 'block';
                    if (replySection) replySection.style.display = 'block';
                } else if (packageType === 'enterprise') {
                    // Enterprise: Show all configs
                    if (socialSection) socialSection.style.display = 'block';
                    if (conversationalSection) conversationalSection.style.display = 'block';
                    if (replySection) replySection.style.display = 'block';
                }
                
                const title = document.querySelector('.setup-title');
                if (title) title.textContent = 'Customize Your AI Automation';
            }
        });

        // Posting schedule functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Day toggle functionality
            const dayToggles = document.querySelectorAll('.day-toggle');
            dayToggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    updateTimeSlotsVisibility();
                });
            });
            
            // Form section collapse/expand functionality
            const sectionTitles = document.querySelectorAll('.card-title');
            sectionTitles.forEach(title => {
                title.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const section = this.closest('.card-style');
                    section.classList.toggle('collapsed');
                });
            });
        });

        function updateTimeSlotsVisibility() {
            const activeDays = document.querySelectorAll('.day-toggle.active');
            const timeSlots = document.getElementById('timeSlots');
            
            if (activeDays.length > 0) {
                timeSlots.style.display = 'block';
                // Add a default time slot if none exist
                const container = document.getElementById('postingTimesContainer');
                if (container.children.length === 0) {
                    addPostingTime();
                }
            } else {
                timeSlots.style.display = 'none';
            }
        }

        function addPostingTime() {
            const container = document.getElementById('postingTimesContainer');
            const timeItem = document.createElement('div');
            timeItem.className = 'posting-time-item';
            timeItem.innerHTML = `
                <input type="time" placeholder="HH:MM" required>
                <button type="button" class="remove-time-btn" onclick="removePostingTime(this)">√ó</button>
            `;
            container.appendChild(timeItem);
        }

        function removePostingTime(button) {
            button.closest('.posting-time-item').remove();
        }

        function collectPostingSchedule() {
            const activeDays = Array.from(document.querySelectorAll('.day-toggle.active')).map(toggle => toggle.dataset.day);
            const timeInputs = Array.from(document.querySelectorAll('.posting-time-item input[type="time"]')).map(input => input.value).filter(time => time);
            
            return {
                days: activeDays,
                times: timeInputs
            };
        }

        function submitCustomizationForm() {
            // Collect form data manually since no form element
            const setupData = {};
            
            // Handle regular input fields
            const inputs = document.querySelectorAll('input[name], select[name], textarea[name]');
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    setupData[input.name] = input.checked;
                } else if (input.type === 'file') {
                    setupData[input.name] = input.files[0];
                } else {
                    setupData[input.name] = input.value;
                }
            });
            
            // Handle grid selections
            const toneGrid = document.querySelector('[data-name="tone"]');
            const selectedTone = toneGrid.querySelectorAll('.grid-item.selected');
            setupData.tone = selectedTone.length > 0 ? selectedTone[0].dataset.value : null;
            
            const colorGrid = document.querySelector('[data-name="chatColors"]');
            const selectedColor = colorGrid.querySelectorAll('.grid-item.selected');
            setupData.chatColors = selectedColor.length > 0 ? selectedColor[0].dataset.value : null;
            
            // Collect posting schedule
            setupData.postingSchedule = collectPostingSchedule();
            
            // Validate required fields
            if (!setupData.businessCategory) {
                alert('Please select a business category.');
                return;
            }
            
            if (!setupData.tone) {
                alert('Please select a chat tone.');
                return;
            }
            
            if (!setupData.chatPurpose || !setupData.chatAudience) {
                alert('Please fill in the chat purpose and target users.');
                return;
            }
            
            if (!setupData.replyGuidelines || !setupData.platformConsiderations) {
                alert('Please fill in reply guidelines and platform considerations.');
                return;
            }
            
            if (!setupData.postingSchedule || setupData.postingSchedule.days.length === 0) {
                alert('Please select at least one day and time for posting.');
                return;
            }
            
            if (!setupData.contentFocus || !setupData.targetAudience) {
                alert('Please fill in content focus and target audience.');
                return;
            }
            
            // Store customization data for Stripe integration
            setJSON('customizationData', setupData);
            
            // Redirect to quote page
            window.location.href = 'quote.html';
        }

        function scheduleConsultation() {
            // TODO: Integrate with Calendly or your scheduling system
            alert('Consultation scheduling coming soon! We\'ll contact you within 2-5 days.');
        }
    </script>
    
    <script src="../../utility/modal.js"></script>
    <script src="../legal/legalSocial.js"></script>
    <script src="step-indicator.js"></script>
    <script type="module">
        import { BusinessFormPersistence } from './businessFormPersistence.js';
        import { setJSON } from '../../utility/setJSON.js';
        
        // Make setJSON available globally for the form submission function
        window.setJSON = setJSON;
        
        // Initialize form persistence for customization form after a short delay
        // to ensure grid selection event listeners are set up
        setTimeout(() => {
            const customizationPersistence = new BusinessFormPersistence('mainContent', 'customization-form-data');
            customizationPersistence.init();
        }, 100);
    </script>
</body>
</html>
