<!-- 
 * Copyright (c) 2025 INEXASLI. All rights reserved.
 * This code is protected under Canadian and international copyright laws.
 * Unauthorized use, reproduction, distribution, or modification of this code 
 * without explicit written permission via email from info@inexasli.com 
 * is strictly prohibited. Violators will be pursued and prosecuted to the 
 * fullest extent of the law in British Columbia, Canada, and applicable 
 * jurisdictions worldwide.
  -->

 <!DOCTYPE html>
 <html lang="en">
 
 <head>
     <link rel="manifest" href="/manifest.json">
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
     <title>******</title>
     <link rel="icon" type="image/x-icon" href="newLogo.jpg">
     <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

     <!-- Extended list of icon links -->
     <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96" />
     <link rel="icon" type="image/svg+xml" href="/images/favicon.svg" />
     <link rel="shortcut icon" href="/images/favicon.ico" />
     <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon.png" />
 </head>
 
 <body id="main-content">

     <!-- Debug Display for Redirect Logs -->
     <div id="redirect-debug-display" style="position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.9); color: white; padding: 10px; border-radius: 5px; max-width: 400px; max-height: 300px; overflow-y: auto; z-index: 10000; font-size: 12px; display: none;">
         <div style="font-weight: bold; margin-bottom: 5px;">üîç Redirect Debug Logs:</div>
         <div id="debug-content"></div>
         <button onclick="document.getElementById('redirect-debug-display').style.display='none';" style="margin-top: 5px; padding: 2px 5px; font-size: 11px;">Close</button>
     </div>

         <!-- Load splash.html and inject it at the top of the body -->
         <script>
      // Load splash.html and inject it at the top of the body
      const splashStart = Date.now();
      (async function() {
        const res = await fetch('/utility/splash.html');
        const html = await res.text();
        const temp = document.createElement('div');
        temp.innerHTML = html;
        // Move all <style> tags to <head> for proper CSS application
        temp.querySelectorAll('style').forEach(style => document.head.appendChild(style));
        // Insert splash markup at the top of <body>
        const splash = temp.querySelector('#splash-screen');
        if (splash) document.body.insertBefore(splash, document.body.firstChild);
      })();
      // Hide splash when page is fully loaded, but wait for half-time animation + brief pause
      window.addEventListener('load', function() {
        var splash = document.getElementById('splash-screen');
        var minTime = 2850; // milliseconds - wait for 50% faster animation (2.35s) + 0.5s pause
        var elapsed = Date.now() - splashStart;
        var delay = Math.max(0, minTime - elapsed);
        setTimeout(function() {
          if (splash) {
            splash.style.opacity = '0';
            setTimeout(function() {
              splash.style.display = 'none';
            }, 400);
          }
        }, delay);
      });
    </script>

    <!-- Debug Display Script -->
    <script>
        // Display redirect debug logs if they exist
        document.addEventListener('DOMContentLoaded', function() {
            const debugLogs = localStorage.getItem('redirectUrlDebugLogs');
            if (debugLogs) {
                try {
                    const logs = JSON.parse(debugLogs);
                    console.log('üîç REDIRECT DEBUG LOGS FROM redirectUrl.html:');
                    logs.forEach(log => {
                        console.log(`${log.timestamp}: ${log.message}`);
                    });
                    
                    const debugDisplay = document.getElementById('redirect-debug-display');
                    const debugContent = document.getElementById('debug-content');
                    
                    debugContent.innerHTML = logs.map(log => 
                        `<div style="margin: 2px 0; font-family: monospace;">${log.timestamp.split('T')[1].split('.')[0]}: ${log.message}</div>`
                    ).join('');
                    
                    debugDisplay.style.display = 'block';
                    
                    // Auto-hide after 10 seconds
                    setTimeout(() => {
                        debugDisplay.style.display = 'none';
                    }, 10000);
                    
                    // Clear the logs after displaying
                    localStorage.removeItem('redirectUrlDebugLogs');
                } catch (e) {
                    console.error('Error parsing debug logs:', e);
                }
            }
        });
    </script>

     <script src="/utility/toolTip.js"></script>
     
     <!-- Add Mermaid.js for decision diagrams -->
     <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
     
     <script src="/app/datain.js" type="module"></script>
     <script src="/app/dataout.js" type="module"></script>
     <script src="/app/payment/paymentform.js"></script>

     <script src="/utility/modal.js"></script>
     <script src="/app/fact-generator/educational-overlay.js"></script>
    

   

     <script>
         // Initialize the data overwrite button in the center of the screen
         document.addEventListener('DOMContentLoaded', function() {
             // Ensure white background color
             document.body.style.backgroundColor = "#ffffff";
             document.documentElement.style.backgroundColor = "#ffffff";
             document.getElementById('main-content').style.backgroundColor = "#ffffff";
             
             // Initialize the copy button for the main content
             if (window.copyUtil) {
                 console.log('Initializing copy button');
                 try {
                     window.copyUtil.init({
                         containerId: 'main-content',  // Using body with ID main-content
                         contentType: ''               // No special formatting
                     });
                     console.log('Copy button initialized successfully');
                 } catch(err) {
                     console.error('Error initializing copy button:', err);
                 }
             } else {
                 console.error('copyUtil not found - check if copy.js loaded correctly');
             }
         });
     </script>
     
     <script>
document.addEventListener('DOMContentLoaded', function() {
  const expandInterval = setInterval(function() {
    const dataLabel = document.querySelector('.data-container-in .data-label');
    if (dataLabel) {
      clearInterval(expandInterval);
      dataLabel.click();
    }
  }, 100);
  
  // Rate limit status will be set by backend after payment or generation
  // No need to create hardcoded frontend values on page load
});
</script>
     <script src="/index.js"></script>
     <script src="https://js.stripe.com/v3/" async></script>
     
     <!-- Move the unified modal script to the very end of body for reliable DOM access -->
    <script src="/utility/termsConsentManager.js"></script>
    </body>
    </html>