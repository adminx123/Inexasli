<!--
 * Copyright (c) 2025 INEXASLI. All rights reserved.
 * This code is protected under Canadian and international copyright laws.
 * Unauthorized use, reproduction, distribution, or modification of this code 
 * without explicit written permission via email from info@inexasli.com 
 * is strictly prohibited. Violators will be pursued and prosecuted to the 
 * fullest extent of the law in British Columbia, Canada, and applicable 
 * jurisdictions worldwide. -->

<div class="device-container">

<div class="row1" style="padding: 20px; text-align: center; background-color: #f0f8ff; border-bottom: 1px solid #ddd; margin-bottom: 20px;">
    <h2 style="color: #333; font-size: 24px; margin-bottom: 10px;">Explore Philosophical Ideas, Deepen Your Understanding!</h2>
    <p style="color: #555; font-size: 16px; line-height: 1.6; margin-bottom: 15px;">
        Intrigued by life's big questions or seeking new perspectives on complex concepts? PhilosophyIQ offers a space for exploration. By posing your questions or outlining areas of interest, you enable our AI to draw upon a vast range of philosophical thought, providing you with summaries, different viewpoints, and thought-provoking insights to enrich your understanding.
    </p>
    <p style="color: #777; font-size: 12px; line-height: 1.5; border: 1px solid #e0e0e0; padding: 10px; background-color: #fff9e6; border-radius: 5px;">
        <em>Important: The information and suggestions provided by this tool are for informational and educational purposes only and are generated by artificial intelligence. Philosophical concepts can be complex and open to interpretation. This tool is not a substitute for academic study or expert consultation in philosophy. We make no guarantees regarding the accuracy, completeness, or suitability of the information for your specific inquiries. Use of this tool and its outputs is at your own risk.</em>
    </p>
    <p style="color: #555; font-size: 16px; line-height: 1.6; margin-top: 15px;">
        Let's ponder together!
    </p>
</div>

  <!-- Simple Form for Philosophical Wisdom -->
  <div class="row1">
    <label class="category-label">Seeking Wisdom On</label>
    <textarea id="philosophy-question" rows="5" placeholder="How to find meaning in difficult work
Balancing family obligations with personal goals
Making ethical decisions when options seem equally wrong
Finding inner peace during times of uncertainty
Accepting things I cannot change"></textarea>
 

  <button class="generate-btn" id="generate-philosophy-btn">Find Philosophical Wisdom</button>
 </div>

 
  <script>
  /*
 * Copyright (c) 2025 INEXASLI. All rights reserved.
 * This code is protected under Canadian and international copyright laws.
 * Unauthorized use, reproduction, distribution, or modification of this code 
 * without explicit written permission via email from info@inexasli.com 
 * is strictly prohibited. Violators will be pursued and prosecuted to the 
 * fullest extent of the law in British Columbia, Canada, and applicable 
 * jurisdictions worldwide.
*/

  (function() {
    console.log("PhilosophyIQ script initializing");

    // FormPersistence is initialized by datain.js and available as window.philosophyFormPersistence
    // No need to create it here - just ensure it's available when we need it

    // Listen for grid-item-toggled event from datain.js
    function handleGridItemToggled(event) {
        console.log('[PhilosophyIQ] Grid item toggled event received');
        // UI behavior only - persistence handled centrally
    }

    // Handle the generate button click
    async function handleGeneratePhilosophyIq() {
        console.log('[PhilosophyIQ] Generate button clicked.');
        
        const result = await window.enhancedLoading(
            'generate-philosophy-btn',
            'philosophy',
            async () => {
                const formData = window.philosophyFormPersistence.getSavedFormData();
                if (!formData) {
                    console.error('[PhilosophyIQ] No input data found in localStorage.');
                    throw new Error('Please enter what you\'re seeking wisdom on before proceeding.');
                }
                
                // Send data to worker
                const apiUrl = 'https://philosophy.4hm7q4q75z.workers.dev/';
                
                console.log('[PhilosophyIQ] Sending philosophyIqInput to worker');
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                
                const responseData = await response.json();
                console.log('[PhilosophyIQ] Worker response:', responseData);
                
                if (responseData.message !== 'Success') {
                    throw new Error(`An error occurred: ${responseData.message || responseData.error || ''}`);
                }
                
                // Store the response
                window.philosophyFormPersistence.saveResponseData(responseData);
                
                // Dispatch an event to notify dataout.js that a response was received
                const event = new CustomEvent('api-response-received', {
                    detail: {
                        module: 'philosophyiq',
                        type: 'worker-response',
                        timestamp: Date.now()
                    }
                });
                document.dispatchEvent(event);
                console.log('[PhilosophyIQ] Dispatched api-response-received event');
                
                return responseData;
            }
        );
        
        // Enhanced loading either returns result or throws error - no need to check result.success
        console.log('[PhilosophyIQ] Philosophical wisdom generated successfully');
    }

    // Initialization
    document.addEventListener('grid-item-toggled', handleGridItemToggled);
    document.getElementById('generate-philosophy-btn').addEventListener('click', handleGeneratePhilosophyIq);

    // Guided forms integration
    if (typeof GuidedForms !== 'undefined' && GuidedForms.philosophyiq) {
        new GuidedForms.philosophyiq();
    }
  })();
  </script>
</div> <!-- Close mobile-container -->