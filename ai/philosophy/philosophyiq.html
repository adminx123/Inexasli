<!--
 * Copyright (c) 2025 INEXASLI. All rights reserved.
 * This code is protected under Canadian and international copyright laws.
 * Unauthorized use, reproduction, distribution, or modification of this code 
 * without explicit written permission via email from info@inexasli.com 
 * is strictly prohibited. Violators will be pursued and prosecuted to the 
 * fullest extent of the law in British Columbia, Canada, and applicable 
 * jurisdictions worldwide. -->

<div class="device-container">
  <!-- Simple Form for Philosophical Wisdom -->
  <div class="row1">
    <label class="category-label">Seeking Wisdom On</label>
    <textarea id="philosophy-question" rows="5" placeholder="How to find meaning in difficult work
Balancing family obligations with personal goals
Making ethical decisions when options seem equally wrong
Finding inner peace during times of uncertainty
Accepting things I cannot change"></textarea>
 

  <button class="generate-btn" id="generate-philosophy-btn">Find Philosophical Wisdom</button>
  <button class="clear-btn" id="clear-philosophy-btn">Clear All</button>
 </div>

 
  <script>
  /*
 * Copyright (c) 2025 INEXASLI. All rights reserved.
 * This code is protected under Canadian and international copyright laws.
 * Unauthorized use, reproduction, distribution, or modification of this code 
 * without explicit written permission via email from info@inexasli.com 
 * is strictly prohibited. Violators will be pursued and prosecuted to the 
 * fullest extent of the law in British Columbia, Canada, and applicable 
 * jurisdictions worldwide.
*/
  (function() {
    console.log("Philosophy IQ script initializing");

    // Handle the generate button click
    async function handleGeneratePhilosophyIq() {
      console.log('[PhilosophyIQ] Generate button clicked.');
      
      try {
        const formData = window.philosophyFormPersistence.getSavedFormData();
        if (!formData || !formData.question) {
          console.error('[PhilosophyIQ] No question found in input data.');
          alert('Please enter what you\'re seeking wisdom on before proceeding.');
          return;
        }
        
        // Use enhanced loading with educational facts
        const result = await window.enhancedLoading(
          'generate-philosophy-btn',
          'philosophy',
          async () => {
            // Send data to worker
            const apiUrl = 'https://philosophy.4hm7q4q75z.workers.dev/'; 
            
            console.log('[PhilosophyIQ] Sending philosophyIqInput to worker');
            const response = await fetch(apiUrl, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-Inexasli-Api-Key': 'your-api-key' // Replace with actual API key mechanism
              },
              body: JSON.stringify(formData)
            });
            
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            
            const responseData = await response.json();
            console.log('[PhilosophyIQ] Worker response:', responseData);
            
            if (responseData.message !== 'Success') {
              throw new Error(`An error occurred: ${responseData.message || responseData.error || ''}`);
            }
            
            return responseData;
          }
        );
        
        // Store the response using centralized system
        window.philosophyFormPersistence.saveResponseData(result);
        
        // Dispatch an event to notify dataout.js that a response was received
        const event = new CustomEvent('api-response-received', {
          detail: {
            module: 'philosophyiq',
            type: 'worker-response',
            timestamp: Date.now()
          }
        });
        document.dispatchEvent(event);
        console.log('[PhilosophyIQ] Dispatched api-response-received event');
        
      } catch (error) {
        console.error('[PhilosophyIQ] Error generating philosophical response:', error);
        alert('An error occurred while seeking philosophical wisdom. Please try again later.');
      }
    }

    // Initialization
    document.getElementById('generate-philosophy-btn').addEventListener('click', handleGeneratePhilosophyIq);
    document.getElementById('clear-philosophy-btn').addEventListener('click', () => {
        window.philosophyFormPersistence.clearLocalStorage();
    });
  })();
  </script>
</div> <!-- Close mobile-container -->